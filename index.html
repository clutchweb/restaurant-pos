<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Titanic - POS</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f1f1f1;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 30px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
    }
    .container {
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    .categories, .manual-entry, .checkout, .receipt {
      margin-top: 20px;
    }
    .category-btn, .item-btn, button {
      padding: 10px 15px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      background: #3498db;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    .category-btn:hover, .item-btn:hover, button:hover {
      background: #2980b9;
    }
    .item-list {
      display: flex;
      flex-wrap: wrap;
    }
    .cart {
      background: white;
      padding: 15px;
      border-radius: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border-bottom: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    input {
      padding: 8px;
      margin: 5px 0;
      width: calc(100% - 20px);
    }
    .receipt {
      white-space: pre-wrap;
      background: white;
      padding: 10px;
      border: 1px dashed #aaa;
    }
  </style>
</head>
<body>
  <header>The Titanic</header>
  <div class="container">
    <div class="categories">
      <h2>Categories</h2>
      <div id="categoryButtons"></div>
    </div>

    <div class="item-list" id="itemButtons"></div>

    <div class="manual-entry">
      <h2>Add Manual Item</h2>
      <input type="text" id="manualName" placeholder="Item Name" />
      <input type="number" id="manualPrice" placeholder="Price" />
      <button onclick="addManualItem()">+ Add to Menu</button>
    </div>

    <div class="cart">
      <h2>Cart</h2>
      <table>
        <thead><tr><th>Item</th><th>Price</th></tr></thead>
        <tbody id="cartItems"></tbody>
        <tfoot><tr><td><strong>Total</strong></td><td id="totalAmount">$0.00</td></tr></tfoot>
      </table>
    </div>

    <div class="checkout">
      <h2>Checkout</h2>
      <select id="paymentMethod">
        <option value="Cash">Cash</option>
        <option value="Card">Card</option>
      </select>
      <div id="cashInputContainer" style="display:none">
        <input type="number" id="cashGiven" placeholder="Cash Given" />
      </div>
      <button onclick="checkout()">Checkout</button>
    </div>

    <div class="receipt" id="receipt" style="display:none;"></div>
  </div>

  <script>
    const items = {
      Drinks: [ { name: "Coke", price: 3 }, { name: "Water", price: 2 } ],
      Food: [ { name: "Burger", price: 8 }, { name: "Pizza", price: 10 } ],
      Desserts: [ { name: "Cake", price: 5 }, { name: "Ice Cream", price: 4 } ]
    };
    let cart = [];
    let currentCategory = '';

    function renderCategories() {
      const catDiv = document.getElementById('categoryButtons');
      catDiv.innerHTML = '';
      Object.keys(items).forEach(category => {
        const btn = document.createElement('button');
        btn.textContent = category;
        btn.className = 'category-btn';
        btn.onclick = () => showItems(category);
        catDiv.appendChild(btn);
      });
    }

    function showItems(category) {
      currentCategory = category;
      const itemDiv = document.getElementById('itemButtons');
      itemDiv.innerHTML = '';
      items[category].forEach(item => {
        const btn = document.createElement('button');
        btn.textContent = `${item.name} - $${item.price.toFixed(2)}`;
        btn.className = 'item-btn';
        btn.onclick = () => addToCart(item);
        itemDiv.appendChild(btn);
      });
    }

    function addManualItem() {
      const name = document.getElementById('manualName').value;
      const price = parseFloat(document.getElementById('manualPrice').value);
      if (!name || isNaN(price)) return alert('Enter valid name and price');
      const newItem = { name, price };
      if (!items['Manual']) items['Manual'] = [];
      items['Manual'].push(newItem);
      renderCategories();
      showItems('Manual');
      document.getElementById('manualName').value = '';
      document.getElementById('manualPrice').value = '';
    }

    function addToCart(item) {
      cart.push(item);
      updateCart();
    }

    function updateCart() {
      const cartBody = document.getElementById('cartItems');
      cartBody.innerHTML = '';
      let total = 0;
      cart.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${item.name}</td><td>$${item.price.toFixed(2)}</td>`;
        cartBody.appendChild(row);
        total += item.price;
      });
      document.getElementById('totalAmount').innerText = `$${total.toFixed(2)}`;
    }

    document.getElementById('paymentMethod').addEventListener('change', function() {
      document.getElementById('cashInputContainer').style.display = this.value === 'Cash' ? 'block' : 'none';
    });

    function checkout() {
      const payment = document.getElementById('paymentMethod').value;
      const total = cart.reduce((sum, item) => sum + item.price, 0);
      let change = 0;
      if (payment === 'Cash') {
        const cashGiven = parseFloat(document.getElementById('cashGiven').value);
        if (isNaN(cashGiven) || cashGiven < total) return alert('Insufficient cash given');
        change = cashGiven - total;
      }
      const now = new Date();
      let receipt = `--- Receipt (The Titanic) ---\n${now.toLocaleString()}\n\nItems:\n`;
      cart.forEach(item => receipt += `${item.name} - $${item.price.toFixed(2)}\n`);
      receipt += `\nTotal: $${total.toFixed(2)}\nPayment: ${payment}\n`;
      if (payment === 'Cash') receipt += `Cash Given: $${parseFloat(document.getElementById('cashGiven').value).toFixed(2)}\nChange: $${change.toFixed(2)}\n`;
      receipt += `--------------------------`;
      document.getElementById('receipt').innerText = receipt;
      document.getElementById('receipt').style.display = 'block';
      cart = [];
      updateCart();
    }

    renderCategories();
  </script>
</body>
</html>
